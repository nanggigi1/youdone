<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" sizes="64x64" href="favicon.png" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>YOU DONE</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      :root {
        /* Countdown parameters */
        --target-datetime: '2027-08-20T17:00:00';

        /* Colors & typography */
        --font-family: 'Poppins', sans-serif;
        --font-color: #ffffff;
        --line-height: 1.4;
        --mobile-font-size: 40px;
        --desktop-font-size: 36px;

        /* Opacity for ‚Äúless prominent‚Äù lines */
        --faded-opacity: 0.3;
      }

      /* Reset & base */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html,
      body {
        width: 100%;
        height: 100%;
      }
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        background: #000;
        color: var(--font-color);
        font-family: var(--font-family);
        line-height: var(--line-height);
        /* Default to desktop size; mobile override below */
        font-size: var(--desktop-font-size);
      }
      @media (max-width: 600px) {
        body {
          font-size: var(--mobile-font-size);
        }
      }

      /* Countdown container */
      #countdown-container {
        text-align: center;
      }
      .countdown-line {
        margin: 0.5em 0;
      }
      /* Day, month, quarter, and year are less prominent */
      #day-line,
      #month-line,
      #quarter-line,
      #year-line {
        opacity: var(--faded-opacity);
      }
      /* Week is now the most prominent */
      #week-line {
        opacity: 1;
      }
      .hidden {
        display: none;
      }

      /* Loading overlay */
      #loading-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.85);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }
      #loading-emoji {
        font-size: 5rem;
      }
    </style>
  </head>

  <body>
    <div id="loading-overlay">
      <span id="loading-emoji"></span>
    </div>

    <div id="countdown-container">
      <div id="day-line" class="countdown-line"></div>
      <div id="week-line" class="countdown-line"></div>
      <div id="month-line" class="countdown-line"></div>
      <div id="quarter-line" class="countdown-line"></div>
      <div id="year-line" class="countdown-line"></div>
    </div>

    <script>
      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ CONSTANTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      const TARGET_DATE = new Date(
        getComputedStyle(document.documentElement)
          .getPropertyValue('--target-datetime')
          .replace(/["']/g, '')
      );
      const EMOJIS = ['üèÜ', 'ü§©', 'üíØ', 'üëπ', 'üéâ', 'üòÖ', 'üòé', 'ü§ò', 'üåà'];
      const WEEK_START_DAY = 5; // Friday (0=Sun,1=Mon,‚Ä¶5=Fri)
      const DAY_END_HOUR = 17; // 5 PM

      const mobileQuery = window.matchMedia('(max-width: 600px)');

      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ INITIALIZATION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      window.addEventListener('DOMContentLoaded', () => {
        const rand = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
        document.getElementById('loading-emoji').textContent = rand;

        updateCountdown(new Date());

        hideLoadingOverlay(); // Will now hide instantly
      });

      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ COUNTDOWN LOGIC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function updateCountdown(referenceDate) {
        const now = referenceDate;
        let target = TARGET_DATE;

        if (now >= target) {
          showOnlyDoneMessage();
          return;
        }

        const daysRemaining = computeDaysRemaining(now, target);
        const weeksRemaining = computeWeeksRemaining(now, target);
        const monthsRemaining = computeMonthsRemaining(now, target);
        const quartersRemaining = computeQuartersRemaining(now, target);
        const yearsRemaining = computeYearsRemaining(now, target);

        // Build each line‚Äôs text & show/hide logic
        let dayText = '';
        if (daysRemaining <= 1) {
          dayText = 'Final day';
        } else {
          dayText = `Today plus ${daysRemaining - 1} more`;
        }

        let weekText = ''; // Week is always shown if day line is faded
        if (weeksRemaining <= 1) {
          weekText = 'Final week';
        } else {
          weekText = `This week plus ${weeksRemaining - 1} more`;
        }

        let monthText = null;
        // Month only shows if more than 1 week remains
        const showMonth = weeksRemaining > 1;
        if (showMonth) {
          monthText =
            monthsRemaining <= 1
              ? 'Final month'
              : `This month plus ${monthsRemaining - 1} more`;
        }

        let quarterText = null;
        // Quarter only shows if more than 1 month remains
        const showQuarter = monthsRemaining > 1;
        if (showQuarter) {
          quarterText =
            quartersRemaining <= 1
              ? 'Final quarter'
              : `This quarter plus ${quartersRemaining - 1} more`;
        }

        let yearText = null;
        // Year only shows if more than 1 quarter remains
        const showYear = quartersRemaining > 1;
        if (showYear) {
          yearText =
            yearsRemaining <= 1
              ? 'Final year'
              : `This year plus ${yearsRemaining - 1} more`;
        }

        writeRealLines(dayText, weekText, monthText, quarterText, yearText);
      }

      function writeRealLines(dayT, weekT, monthT, quarterT, yearT) {
        const d = document.getElementById('day-line');
        const w = document.getElementById('week-line');
        const m = document.getElementById('month-line');
        const q = document.getElementById('quarter-line');
        const y = document.getElementById('year-line');

        // Day is always shown if time remains
        d.textContent = dayT;
        d.classList.remove('hidden');

        // Week is always shown if time remains
        w.textContent = weekT;
        w.classList.remove('hidden');

        // Month
        if (monthT) {
          m.textContent = monthT;
          m.classList.remove('hidden');
        } else {
          m.classList.add('hidden');
        }

        // Quarter
        if (quarterT) {
          q.textContent = quarterT;
          q.classList.remove('hidden');
        } else {
          q.classList.add('hidden');
        }

        // Year
        if (yearT) {
          y.textContent = yearT;
          y.classList.remove('hidden');
        } else {
          y.classList.add('hidden');
        }
      }

      function showOnlyDoneMessage() {
        const d = document.getElementById('day-line');
        const w = document.getElementById('week-line');
        const m = document.getElementById('month-line');
        const q = document.getElementById('quarter-line');
        const y = document.getElementById('year-line');

        d.textContent = 'You‚Äôre done!';
        d.classList.remove('hidden');
        w.classList.add('hidden');
        m.classList.add('hidden');
        q.classList.add('hidden');
        y.classList.add('hidden');
      }

      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ TIME CALCULATIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function computeDaysRemaining(now, target) {
        const currentDayBlock = getPrevious5pm(now);
        const targetDayBlock = getPrevious5pm(target);

        const diffMs = targetDayBlock - currentDayBlock;
        const daysBetween = Math.round(diffMs / (24 * 60 * 60 * 1000));
        return daysBetween + 1;
      }

      function getPrevious5pm(dt) {
        const d = new Date(dt.getTime());

        if (d.getHours() < DAY_END_HOUR) {
          d.setDate(d.getDate() - 1);
        }
        d.setHours(DAY_END_HOUR, 0, 0, 0);
        return d;
      }

      function computeWeeksRemaining(now, target) {
        const currentBlock = getLastFriday5pm(now);
        const targetBlock = getLastFriday5pm(target);

        const diffMs = targetBlock - currentBlock;
        const weeksBetween = Math.round(diffMs / (7 * 24 * 60 * 60 * 1000));
        return weeksBetween + 1;
      }

      function getLastFriday5pm(dt) {
        const d = new Date(dt.getTime());
        const day = d.getDay();
        let deltaDays;

        if (day > WEEK_START_DAY) {
          deltaDays = day - WEEK_START_DAY;
        } else if (day < WEEK_START_DAY) {
          deltaDays = day + (7 - WEEK_START_DAY);
        } else {
          if (d.getHours() < DAY_END_HOUR) {
            deltaDays = 7;
          } else {
            deltaDays = 0;
          }
        }

        d.setDate(d.getDate() - deltaDays);
        d.setHours(DAY_END_HOUR, 0, 0, 0);
        return d;
      }

      function computeMonthsRemaining(now, target) {
        const cmStart = new Date(
          now.getFullYear(),
          now.getMonth(),
          1,
          0,
          0,
          0,
          0
        );
        const tmStart = new Date(
          target.getFullYear(),
          target.getMonth(),
          1,
          0,
          0,
          0,
          0
        );

        const yearDiff = tmStart.getFullYear() - cmStart.getFullYear();
        const monthDiff = tmStart.getMonth() - cmStart.getMonth();
        return yearDiff * 12 + monthDiff + 1;
      }

      function computeQuartersRemaining(now, target) {
        const currQuarterStart = getQuarterStart(now);
        const targQuarterStart = getQuarterStart(target);
        const currIndex =
          currQuarterStart.getFullYear() * 4 +
          Math.floor(currQuarterStart.getMonth() / 3);
        const targIndex =
          targQuarterStart.getFullYear() * 4 +
          Math.floor(targQuarterStart.getMonth() / 3);
        return targIndex - currIndex + 1;
      }

      function getQuarterStart(dt) {
        const y = dt.getFullYear();
        const m = dt.getMonth();
        const qIndex = Math.floor(m / 3);
        const qMonth = qIndex * 3;
        return new Date(y, qMonth, 1, 0, 0, 0, 0);
      }

      function computeYearsRemaining(now, target) {
        const cyStart = new Date(now.getFullYear(), 0, 1, 0, 0, 0, 0);
        const tyStart = new Date(target.getFullYear(), 0, 1, 0, 0, 0, 0);
        return tyStart.getFullYear() - cyStart.getFullYear() + 1;
      }

      // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ LOADING OVERLAY ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      function hideLoadingOverlay() {
        document.getElementById('loading-overlay').style.display = 'none';
      }
    </script>
  </body>
</html>
